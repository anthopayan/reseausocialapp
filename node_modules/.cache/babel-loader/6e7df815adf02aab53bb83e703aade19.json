{"ast":null,"code":"var _jsxFileName = \"/Users/kevinsasso/Desktop/THP/Next/reseausocialapp/src/pages/MyProfile/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Cookies from 'js-cookie';\nimport jwt_decode from \"jwt-decode\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst MyProfile = () => {\n  _s();\n\n  const history = useHistory();\n  const [user, setUser] = useState(0);\n  useEffect(() => {\n    const fetchUserProfile = async () => {\n      fetch('http://localhost:1337/users/me', {\n        method: 'get',\n        headers: {\n          'Authorization': `Bearer ${Cookies.get('token')}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify()\n      }).then(response => response.json()).then(response => {\n        setUser(response);\n        console.log(response.error);\n      }).catch(function () {\n        console.log(\"error\");\n      });\n    };\n\n    fetchUserProfile();\n  }, []);\n\n  const handleRoute = () => {\n    history.push(\"/login\");\n  };\n\n  if (user.error === 'Unauthorized') {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"TU N'AS PAS LE DROIT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleRoute,\n        children: \"Log toi petit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Bonjour\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Username : \", user.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Email : \", user.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Email : \", user.created_at]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true);\n  }\n\n  ;\n};\n\n_s(MyProfile, \"lZuxXx7Ob7NtEgSlaPlQmIMvL+8=\", false, function () {\n  return [useHistory];\n});\n\n_c = MyProfile;\nexport default MyProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyProfile\");","map":{"version":3,"sources":["/Users/kevinsasso/Desktop/THP/Next/reseausocialapp/src/pages/MyProfile/index.jsx"],"names":["React","useState","useEffect","Cookies","jwt_decode","useHistory","MyProfile","history","user","setUser","fetchUserProfile","fetch","method","headers","get","body","JSON","stringify","then","response","json","console","log","error","catch","handleRoute","push","username","email","created_at"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,UAAT,QAA2B,kBAA3B;;;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAAA;;AACtB,QAAMC,OAAO,GAAGF,UAAU,EAA1B;AACA,QAAM,CAACG,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAAC,CAAD,CAAhC;AAGAC,EAAAA,SAAS,CAAE,MAAM;AACf,UAAMQ,gBAAgB,GAAG,YAAY;AAEnCC,MAAAA,KAAK,CAAC,gCAAD,EAAmC;AACtCC,QAAAA,MAAM,EAAE,KAD8B;AAEtCC,QAAAA,OAAO,EAAE;AACP,2BAAkB,UAASV,OAAO,CAACW,GAAR,CAAY,OAAZ,CAAqB,EADzC;AAEP,0BAAgB;AAFT,SAF6B;AAMtCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL;AANgC,OAAnC,CAAL,CAOGC,IAPH,CAOSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAPtB,EAQCF,IARD,CAQOC,QAAD,IAAc;AACjBV,QAAAA,OAAO,CAACU,QAAD,CAAP;AACAE,QAAAA,OAAO,CAACC,GAAR,CAAYH,QAAQ,CAACI,KAArB;AACF,OAXD,EAWGC,KAXH,CAWS,YAAW;AAClBH,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACH,OAbC;AAcD,KAhBD;;AAiBAZ,IAAAA,gBAAgB;AACjB,GAnBQ,EAmBN,EAnBM,CAAT;;AAqBA,QAAMe,WAAW,GAAG,MAAK;AACvBlB,IAAAA,OAAO,CAACmB,IAAR,CAAa,QAAb;AACD,GAFD;;AAKA,MAAGlB,IAAI,CAACe,KAAL,KAAe,cAAlB,EAAiC;AAC/B,wBACE;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAQ,QAAA,OAAO,EAAEE,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA,oBADF;AAMD,GAPD,MAOM;AAEP,wBACE;AAAA,8BACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,eAEC;AAAA,kCAAgBjB,IAAI,CAACmB,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA,cAFD,eAGC;AAAA,+BAAanB,IAAI,CAACoB,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA,cAHD,eAIC;AAAA,+BAAapB,IAAI,CAACqB,UAAlB;AAAA;AAAA;AAAA;AAAA;AAAA,cAJD;AAAA,oBADF;AAQE;;AAAA;AACF,CAjDD;;GAAMvB,S;UACYD,U;;;KADZC,S;AAmDN,eAAeA,SAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Cookies from 'js-cookie';\nimport jwt_decode from \"jwt-decode\";\nimport { useHistory } from \"react-router-dom\";\n\nconst MyProfile = () => {\n  const history = useHistory();\n  const [user, setUser] = useState(0);\n\n  \n  useEffect (() => {\n    const fetchUserProfile = async () => {\n      \n      fetch('http://localhost:1337/users/me', {\n        method: 'get',\n        headers: {\n          'Authorization': `Bearer ${Cookies.get('token')}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify()\n      }).then((response) => response.json())\n      .then((response) => {\n         setUser(response);\n         console.log(response.error)\n      }).catch(function() {\n        console.log(\"error\");\n    });\n    }; \n    fetchUserProfile()\n  }, []);\n\n  const handleRoute = () =>{ \n    history.push(\"/login\");\n  }\n\n\n  if(user.error === 'Unauthorized'){\n    return (\n      <>\n        <h1>TU N'AS PAS LE DROIT</h1>\n        <button onClick={handleRoute}>Log toi petit</button>\n      </>\n    );\n  }else {\n\n return (\n   <>\n    <h1>Bonjour</h1>\n    <h2>Username : {user.username}</h2>\n    <h2>Email : {user.email}</h2>\n    <h2>Email : {user.created_at}</h2>\n  </>\n );\n  };\n};\n\nexport default MyProfile;"]},"metadata":{},"sourceType":"module"}